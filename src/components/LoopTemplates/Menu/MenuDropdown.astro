---
// src/components/LoopTemplates/Menu/MenuDropdown.astro
/**
 * Menu Dropdown Component
 * 
 * Dropdown/submenu that appears on hover.
 * Uses semantic HTML with ARIA for accessibility.
 */
import MenuList from './MenuList.astro';

export interface Props {
  items: any[];
  level?: number;
  parentSlug?: string;
  maxDepth?: number;
  listClassName?: string;
  submenuListClassName?: string;
  itemClassName?: string;
  linkClassName?: string;
  submenuLinkClassName?: string;
}

const {
  items = [],
  level = 1,
  parentSlug = 'menu',
  maxDepth,
  listClassName,
  submenuListClassName,
  itemClassName,
  linkClassName,
  submenuLinkClassName,
} = Astro.props as Props;
const dropdownId = `dropdown-${parentSlug}-${level}`;
const isNestedDropdown = level > 1;
const isTopDropdown = level === 1;
const resolvedSubmenuListClassName = submenuListClassName;
---

<div 
  id={dropdownId}
  class={`menu-dropdown hidden absolute top-full left-0 mt-0 ${isTopDropdown ? "menu-dropdown--top" : ""} ${isNestedDropdown ? "menu-dropdown--nested" : ""}`.trim()}
  data-level={level}
>
  <MenuList
    items={items}
    level={level}
    maxDepth={maxDepth}
    listClassName={listClassName}
    submenuListClassName={resolvedSubmenuListClassName}
    itemClassName={itemClassName}
    linkClassName={linkClassName}
    submenuLinkClassName={submenuLinkClassName}
  />
</div>
