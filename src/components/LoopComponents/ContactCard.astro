---
// src/components/LoopComponents/ContactCard.astro
/**
 * Contact Card Component
 *
 * Displays contact information with:
 * - Icon (defaults based on tags: phone, email, or generic)
 * - Title (phone number, email address, etc.)
 * - Optional description
 * - Clickable link if linkPrefix provided
 *
 * Used in ContactVariant to display phone, email, address, etc.
 */

import Icon from "@/components/Icon";

export interface Props {
  title: string; // Contact info (phone number, email, etc.)
  linkPrefix?: string; // URL prefix (tel:, mailto:, etc.)
  tags?: string[]; // Used to determine default icon
  description?: string; // Optional label/description
  icon?: any; // Custom icon (overrides default)
}

const { title, linkPrefix, tags, description, icon } = Astro.props;

// Smart icon selection based on tags if no custom icon provided
const defaultIcon = tags?.includes("phone")
  ? "lu:phone"
  : tags?.includes("email")
    ? "lu:mail"
    : "lu:contact";

const displayIcon = icon || defaultIcon;

// Build full link if prefix provided (tel:, mailto:, etc.)
const href = linkPrefix ? `${linkPrefix}${title}` : undefined;
---

<div class="bg-bg rounded-lg shadow-md hover:shadow-lg transition-shadow p-6">
  <div class="flex items-start gap-4">
    {/* Icon circle */}
    <div class="flex-shrink-0">
      <div
        class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center"
      >
        <Icon icon={displayIcon} size="md" className="text-primary" />
      </div>
    </div>

    {/* Contact info */}
    <div class="flex-1">
      {/* Title as link or plain text */}
      {
        href ? (
          <a
            href={href}
            class="text-lg font-semibold text-heading hover:text-primary transition-colors block"
          >
            {title}
          </a>
        ) : (
          <p class="text-lg font-semibold text-heading">{title}</p>
        )
      }

      {/* Optional description */}
      {description && <p class="text-text mt-1">{description}</p>}
    </div>
  </div>
</div>
