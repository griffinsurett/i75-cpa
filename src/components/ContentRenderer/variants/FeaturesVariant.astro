---
import ArrowHeading from "@/components/ArrowHeading.astro";
import Heading from "@/components/Heading";
import CTABlock from "@/components/CTABlock.astro";
import { Image } from "astro:assets";
import DefaultImage from "@/assets/i75/passer.png";
import { course } from "@/content/siteData";

const {
  items = [],
  className = "",
  id,
} = Astro.props;

const resolveImage = () => DefaultImage;
---

<section id={id} class={`outer-section ${className}`}>
  <div class="inner-section-sm mx-auto flex flex-col items-center justify-center">
    <div class="text-center space-y-4 mb-8">
      <ArrowHeading
        tagName="h2"
        variant="secondary"
        className="h3 font-bold text-light-primary tracking-wide"
        containerClass="flex items-center justify-center mb-6"
        beforeClass="beforeAndAfterHeadingClass"
        afterClass="beforeAndAfterHeadingClass"
        before="What's Included In Your "
        text="i75"
        after={` ${course} Course`}
      />
    </div>

    <ol class="space-y-20 md:space-y-24">
      {items.map((feature, index) => {
        const isEven = index % 2 === 0;
        const imageOrder = isEven ? "order-2 lg:order-2" : "order-2 lg:order-1";
        const contentOrder = isEven ? "order-1 lg:order-1" : "order-1 lg:order-2";
        const image = resolveImage(feature);

        return (
          <li class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
            <div class={`${imageOrder} relative group`}>
              <div class="relative overflow-hidden rounded-3xl shadow-2xl ring-1 ring-white/10">
                <Image
                  src={image}
                  alt={feature.title}
                  class="w-full h-80 md:h-96 object-cover transition-transform duration-500 group-hover:scale-105"
                  loading="lazy"
                />
              </div>
            </div>

            <div class={`${contentOrder} space-y-6 h-full`}>
              <div class="space-y-4 sticky-section flex flex-col gap-4">
                <Heading
                  tagName="span"
                  className="h3 font-bold text-light-primary uppercase tracking-wide"
                >
                  {feature.title}
                </Heading>
                <p class="text-lg md:text-xl text-light-primary/90 leading-relaxed">
                  {feature.description}
                </p>
              </div>
            </div>
          </li>
        );
      })}
    </ol>

    <CTABlock
      containerClass="text-left flex flex-col justify-start items-start mt-10"
      showSecondaryButton={false}
      showSignature={false}
    />
  </div>
</section>
