---
// src/components/ContentRenderer/variants/MemesVariant.astro
/**
 * Memes Variant - Visual comparison section
 * Features: Two (or more) meme images with labels and centered arrow
 */
import type { BaseVariantProps } from "../ContentRenderer.types";
import MemeImage from "@/components/MemeImage.astro";
import { Image } from "astro:assets";
import StraightArrow from "@/assets/i75/straight-arrow.png";
import { resolveImageMetadata, getImageAlt } from "@/utils/images";

const {
  items = [],
  className = "",
  id,
} = Astro.props as BaseVariantProps;

const resolveImage = (item: any) => {
  const image = item?.featuredImage ?? item?.bannerImage;
  const metadata = resolveImageMetadata(image);
  const fallbackAlt = item?.description ?? item?.title ?? "";
  const alt = getImageAlt(image, fallbackAlt);
  return { metadata, alt };
};
---

<section id={id} class={`py-8 md:py-20 border-t-3 border-light-primary ${className}`}>
  <div class="relative">
    <div class="flex justify-center inner-section items-start gap-4 p-0">
      {items.map((item) => {
        const { metadata, alt } = resolveImage(item);
        if (!metadata) return null;
        const label = item.title;
        const altText = alt || label;

        return (
          <MemeImage img={metadata} label={label} alt={altText} class="w-full" />
        );
      })}
    </div>

    <Image
      src={StraightArrow}
      alt="Straight Arrow"
      class="w-7 h-7 lg:w-11 lg:h-11 absolute left-1/2 -translate-x-1/3 -mt-2 md:-mt-5"
      width={48}
      height={48}
    />
  </div>
</section>
