---
// src/pages/privacy-policy.astro
import BaseLayout from "@/layouts/BaseLayout.astro";
import { siteData } from "@/content/siteData";
import OptOutButton from "@/components/preferences/consent/OptOutButton";

const effectiveDate = "January 14, 2025";
let sectionNumber = 0;
---

<BaseLayout
  title={`Privacy Policy ‚Äî ${siteData.title}`}
  description={`How ${siteData.title} collects and uses your information.`}
>
  <article class="prose prose-lg max-w-4xl mx-auto py-16 px-6">
    <h1>Privacy Policy</h1>
    <p><em>Effective date: {effectiveDate}</em></p>

    <h2>{++sectionNumber}. Introduction</h2>
    <p>
      Welcome to {siteData.title}. We respect your privacy and are committed to 
      protecting your personal information. This Privacy Policy explains how we 
      collect, use, disclose, and safeguard your information when you visit our website.
    </p>

    <h2>{++sectionNumber}. Information We Collect</h2>
    <p>When you interact with {siteData.title}, we may collect:</p>
    <ul>
      <li>
        <strong>Contact Information:</strong> Name, email address, and phone number 
        when you submit forms or contact us.
      </li>
      <li>
        <strong>Technical Data:</strong> IP address, browser type, device information, 
        and pages visited (via cookies when you consent).
      </li>
      <li>
        <strong>Usage Data:</strong> How you interact with our site, pages viewed, 
        time spent, and referral sources (via cookies when you consent).
      </li>
    </ul>

    <h2>{++sectionNumber}. How We Use Your Information</h2>
    <ul>
      <li>To provide and maintain our services</li>
      <li>To respond to your inquiries and requests</li>
      <li>To improve our website and user experience</li>
      <li>To analyze site performance and usage (with consent)</li>
      <li>To send marketing communications (with consent)</li>
    </ul>

    <h2>{++sectionNumber}. Third-Party Services</h2>
    <p>With your consent, we may share information with:</p>
    <ul>
      <li><strong>Google Translate:</strong> For website translation (functional cookies)</li>
      <li><strong>Google Analytics:</strong> For site analytics (performance cookies, if enabled)</li>
      <li><strong>Advertising Networks:</strong> Facebook, Google Ads (targeting cookies, if enabled)</li>
    </ul>
    <p>
      We use Vercel for hosting and Vercel Analytics for basic traffic metrics. 
      These services are privacy-first and do not use cookies or track personal information.
    </p>

    <h2>{++sectionNumber}. Cookies & Tracking</h2>
    <p>
      We use cookies and similar technologies to enhance your experience. You can 
      manage your cookie preferences at any time. For full details, see our{' '}
      <a href="/cookie-policy">Cookie Policy</a>.
    </p>

    <div id="ccpa-rights" class="border-4 border-blue-600 rounded-xl p-8 my-16 bg-blue-50">
      <h2 class="text-3xl font-bold text-blue-900 mt-0">
        {++sectionNumber}. California Privacy Rights (CCPA)
      </h2>
      <p class="text-xl font-semibold text-blue-800">
        Do Not Sell or Share My Personal Information
      </p>

      <h3>What Does "Sale" or "Sharing" Mean?</h3>
      <p>
        Under California law (CCPA/CPRA), "sale" or "sharing" means making your 
        personal information available to third parties in exchange for anything of 
        value, including for advertising or analytics purposes.
      </p>

      <h3>What We Share</h3>
      <p>When you enable certain features, we may share data with:</p>
      <ul>
        <li><strong>Google Translate</strong> ‚Äî Translation services (functional cookies)</li>
        <li><strong>Google Analytics</strong> ‚Äî Site analytics (performance cookies)</li>
        <li><strong>Advertising Networks</strong> ‚Äî Facebook, Google Ads (targeting cookies)</li>
      </ul>

      <div class="bg-white border-2 border-blue-600 rounded-lg p-6 my-6">
        <h3 class="mt-0">Opt Out Now</h3>
        <p class="mb-4">
          Click below to instantly disable all non-essential cookies and stop data sharing:
        </p>
        <OptOutButton client:load />
      </div>

      <div class="bg-gray-50 border-2 border-gray-300 rounded-lg p-6 my-6">
        <h3 class="mt-0">Other Ways to Opt Out</h3>
        
        <div class="mb-4">
          <p class="font-semibold mb-2">Manage Individual Cookie Categories</p>
          <button 
            id="open-cookie-preferences"
            class="bg-white border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg font-bold hover:bg-blue-50 transition-colors"
            type="button"
          >
            üç™ Cookie Settings
          </button>
          <p class="text-sm text-gray-600 mt-2">
            Choose which types of cookies to enable or disable individually.
          </p>
        </div>

        <div>
          <p class="font-semibold mb-2">Use "Do Not Track" in Your Browser</p>
          <p class="text-sm mb-2">
            Enable "Do Not Track" in your browser settings. We automatically honor this signal.
          </p>
          <details class="text-sm">
            <summary class="cursor-pointer text-blue-600 hover:text-blue-700 font-semibold">
              How to enable Do Not Track ‚Üí
            </summary>
            <ul class="mt-2 space-y-1 ml-4 text-gray-700">
              <li><strong>Chrome:</strong> Settings ‚Üí Privacy and security ‚Üí "Do Not Track"</li>
              <li><strong>Firefox:</strong> Settings ‚Üí Privacy & Security ‚Üí "Do Not Track"</li>
              <li><strong>Safari:</strong> Preferences ‚Üí Privacy ‚Üí "Ask websites not to track me"</li>
              <li><strong>Edge:</strong> Settings ‚Üí Privacy ‚Üí "Do Not Track"</li>
            </ul>
          </details>
        </div>
      </div>

      <h3>Your California Privacy Rights</h3>
      <p>If you're a California resident, you have these rights:</p>
      <ul>
        <li>
          <strong>Right to Know:</strong> Request disclosure of what personal information 
          we've collected about you in the past 12 months.
        </li>
        <li>
          <strong>Right to Delete:</strong> Request deletion of your personal information, 
          subject to certain exceptions.
        </li>
        <li>
          <strong>Right to Opt-Out:</strong> Stop the sale or sharing of your personal 
          information (use the button above).
        </li>
        <li>
          <strong>Right to Correct:</strong> Request correction of inaccurate personal information.
        </li>
        <li>
          <strong>Right to Non-Discrimination:</strong> We won't discriminate against you 
          for exercising your rights. Same service, same pricing.
        </li>
      </ul>

      <h3>Categories of Personal Information We Collect</h3>
      <ul>
        <li><strong>Identifiers:</strong> Name, email address, IP address</li>
        <li><strong>Internet Activity:</strong> Pages visited, clicks, browsing behavior</li>
        <li><strong>Geolocation:</strong> Approximate location derived from IP address</li>
        <li><strong>Sensitive Information:</strong> We do NOT collect SSN, financial data, or health information</li>
      </ul>

      <h3>How to Exercise Your Rights</h3>
      <p>To request access to your data, request deletion, or ask questions about your privacy:</p>
      
      <div class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-4">
        <p class="font-semibold mb-3">Contact Us</p>
        <ul class="space-y-2 mb-4">
          <li>
            <strong>Email:</strong>{' '}
            <a href="mailto:privacy@example.com" class="text-blue-600 underline hover:text-blue-700">
              privacy@example.com
            </a>
          </li>
          <li><strong>Subject Line:</strong> "CCPA Request - [Right to Know/Delete/Correct]"</li>
          <li><strong>Include:</strong> Your name, email, and description of your request</li>
          <li><strong>Response Time:</strong> We'll respond within 45 days</li>
        </ul>
        <a 
          href="/contact"
          class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors"
        >
          Contact Us About Privacy ‚Üí
        </a>
      </div>

      <div class="bg-yellow-50 border-2 border-yellow-600 rounded-lg p-4 mt-4">
        <p class="text-sm text-yellow-900 mb-2">
          <strong>‚ö†Ô∏è Verification Required</strong>
        </p>
        <p class="text-sm text-yellow-900 mb-0">
          To protect your privacy, we must verify your identity before processing requests. 
          We may ask you to confirm recent interactions with our site or provide additional 
          identifying information. Authorized agents must provide proof of authorization.
        </p>
      </div>
    </div>

    <h2>{++sectionNumber}. Data Security</h2>
    <p>
      We implement reasonable technical and organizational measures to protect 
      your data against unauthorized access, disclosure, alteration, or destruction. 
      However, no method of transmission over the Internet is 100% secure.
    </p>

    <h2>{++sectionNumber}. Data Retention</h2>
    <p>
      We retain your personal information only for as long as necessary to fulfill 
      the purposes outlined in this Privacy Policy, unless a longer retention period 
      is required or permitted by law.
    </p>

    <h2>{++sectionNumber}. Children's Privacy</h2>
    <p>
      {siteData.title} does not knowingly collect personal information from anyone 
      under 16 years old. If you believe we have inadvertently collected such information, 
      please contact us immediately to have it removed.
    </p>

    <h2>{++sectionNumber}. International Users</h2>
    <p>
      If you are accessing our site from outside the United States, please be 
      aware that your information may be transferred to, stored, and processed 
      in the United States where our servers are located and our central database is operated.
    </p>

    <h2>{++sectionNumber}. Your Rights</h2>
    <p>Depending on your location, you may have the following rights:</p>
    <ul>
      <li>Access the personal information we hold about you</li>
      <li>Request correction of inaccurate information</li>
      <li>Request deletion of your information</li>
      <li>Object to processing of your information</li>
      <li>Request restriction of processing</li>
      <li>Request transfer of your information</li>
      <li>Withdraw consent at any time</li>
    </ul>

    <h2>{++sectionNumber}. Changes to This Policy</h2>
    <p>
      We may update this Privacy Policy from time to time. Changes will be posted 
      on this page with a revised "Effective date." We encourage you to review 
      this policy periodically. Your continued use of our services after any changes 
      indicates your acceptance of the updated policy.
    </p>

    <h2>{++sectionNumber}. Contact Us</h2>
    <p>If you have questions about this Privacy Policy or wish to exercise your rights, contact us:</p>
    <ul>
      <li>
        <strong>Email:</strong>{' '}
        <a href="mailto:privacy@example.com" class="text-blue-600 underline hover:text-blue-700">
          privacy@example.com
        </a>
      </li>
      <li><strong>Phone:</strong> 1-800-123-4567</li>
      <li>
        <strong>Visit:</strong>{' '}
        <a href="/contact" class="text-blue-600 underline hover:text-blue-700">
          Contact Page
        </a>
      </li>
    </ul>
  </article>
</BaseLayout>

<script>
  // Open cookie preferences modal from CCPA section
  document.getElementById('open-cookie-preferences')?.addEventListener('click', () => {
    window.dispatchEvent(new CustomEvent('open-cookie-preferences'));
  });
  
  // Smooth scroll to CCPA section if URL has hash
  if (window.location.hash === '#ccpa-rights') {
    setTimeout(() => {
      document.getElementById('ccpa-rights')?.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }, 100);
  }
</script>