import{r as i,j as t}from"./react-core.DhkiIPoq.js";import{M as T}from"./modal.u2fzSB98.js";import{u as E,e as C}from"./scriptManager.B_5gT4bO.js";import{B as y,A as M}from"./Button.CIQX9MTe.js";import I from"./Accordion.BQUsRIE-.js";import"./consent.DTnIOFqc.js";function A({label:f,description:a,checked:l,onChange:p,disabled:n=!1,note:m,id:b,bordered:h=!0,className:w="",hideText:v=!1,size:u="md",labelClassName:x="",descriptionClassName:g="",noteClassName:k="",trackClassName:N="",thumbClassName:j=""}){const e=i.useId(),s=b??e,o=`${s}-label`,r=a?`${s}-description`:void 0,c=u==="lg"?{track:"h-7 w-12",thumb:"h-5 w-5",on:"translate-x-6",off:"translate-x-1"}:u==="sm"?{track:"h-5 w-9",thumb:"h-3.5 w-3.5",on:"translate-x-5",off:"translate-x-1"}:{track:"h-6 w-11",thumb:"h-4 w-4",on:"translate-x-6",off:"translate-x-1"},d=S=>{S.stopPropagation(),!n&&p(!l)};return t.jsxs("div",{className:`flex items-start justify-between gap-4 ${h?"border-b border-surface last:border-b-0":""} ${w}`,children:[t.jsxs("div",{className:`flex-1 pr-4 ${n?"cursor-not-allowed":"cursor-pointer"}`,onClick:d,role:"presentation",children:[t.jsx("p",{id:o,className:`font-semibold text-heading ${v?"sr-only":""} ${x}`,children:f}),a&&t.jsx("p",{id:r,className:`text-sm text-text mt-1 ${v?"sr-only":""} ${g}`,children:a})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[m&&t.jsx("span",{className:`text-xs font-semibold text-primary ${k}`,children:m}),t.jsx("button",{type:"button",id:s,role:"switch","aria-checked":l,"aria-labelledby":o,"aria-describedby":r,"aria-disabled":n,disabled:n,onClick:d,className:`relative inline-flex ${c.track} items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${N} ${l?"bg-primary":"bg-text/20"} ${n?"opacity-60 cursor-not-allowed":""}`,children:t.jsx("span",{className:`inline-block ${c.thumb} transform rounded-full bg-bg transition-transform shadow ${j} ${l?c.on:c.off}`})})]})]})}const $=[{id:"necessary",title:"Strictly Necessary Cookies",description:"These cookies are essential for the website to function properly. They enable core functionality such as security, network management, and accessibility.",required:!0},{id:"functional",title:"Functional Cookies",description:"These cookies enable the website to provide enhanced functionality and personalization. They may be set by us or by third party providers."},{id:"performance",title:"Performance Cookies",description:"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site."},{id:"targeting",title:"Targeting Cookies",description:"These cookies may be set through our site by our advertising partners to build a profile of your interests and show you relevant adverts."}];function P({isOpen:f,onClose:a}){const{getCookie:l,setCookie:p}=E(),[n,m]=i.useTransition(),b=i.useMemo(()=>{const e=l("cookie-consent");if(e)try{return JSON.parse(e)}catch(s){console.error("Failed to parse cookie consent:",s)}return{necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()}},[l]),[h,w]=i.useState(b),[v,u]=i.useState(!1),x=i.useRef(null);i.useEffect(()=>{const e=x.current;if(!e)return;const s=()=>{const o=e.scrollHeight>e.clientHeight,r=e.scrollTop+e.clientHeight>=e.scrollHeight-10;u(o&&!r)};return s(),e.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0}),()=>{e.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[f]);const g=$.map((e,s)=>({slug:e.id,title:e.title,description:e.description,contentSlotId:`cookie-category-${s}-content`})),k=(e,s)=>{e!=="necessary"&&w(o=>({...o,[e]:typeof s=="boolean"?s:!o[e]}))},N=()=>{const e={necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()};p("cookie-consent",JSON.stringify(e),{expires:365}),C(),window.dispatchEvent(new Event("consent-changed")),m(()=>{a()})},j=()=>{const e={...h,timestamp:Date.now()};p("cookie-consent",JSON.stringify(e),{expires:365}),C(),window.dispatchEvent(new Event("consent-changed")),m(()=>{a()})};return t.jsx(T,{isOpen:f,onClose:a,closeButton:!0,className:"bg-transparent p-0 max-w-3xl w-full mx-4 max-h-[90vh] flex flex-col shadow-none",overlayClass:"bg-primary-dark/60",ariaLabel:"Manage cookie consent preferences",ssr:!1,children:t.jsxs("div",{className:"rounded-2xl p-6 md:p-8 shadow-xl bg-primary text-light-primary ring-3 ring-white w-full max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"mb-6 shrink-0",children:[t.jsx("h2",{className:"text-3xl font-bold text-light-primary mb-3",children:"Manage Consent Preferences"}),t.jsxs("p",{className:"text-light-primary/90 text-xs lg:text-sm leading-relaxed mb-3",children:["We use cookies and similar technologies to help personalize content and offer a better experience. You can click"," ",t.jsx(y,{variant:"hoverUnderline",href:"/cookie-policy",className:"text-light-primary",children:"here"})," ","to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer."]}),t.jsxs(y,{variant:"hoverUnderline",href:"/cookie-policy",className:"text-light-primary",children:["More information",t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),t.jsx("div",{className:"relative flex-1 min-h-0",children:t.jsxs("div",{ref:x,className:"overflow-y-auto max-h-[40vh] pr-2",children:[t.jsx(I,{allowMultiple:!0,className:"space-y-3",items:g,showIndicator:!1,itemClassName:"border border-white/30 bg-transparent",headerClassName:"!bg-transparent hover:!bg-transparent",indicatorClassName:"text-light-primary",panelClassName:"bg-transparent",contentClassName:"prose prose-invert text-light-primary/90 max-w-none",headerSlot:({item:e,id:s,expanded:o})=>{const r=$.find(d=>d.id===e.slug);if(!r)return null;const c=`${s}-toggle`;return t.jsxs("div",{className:"flex items-center gap-3 w-full",children:[t.jsx("span",{className:"font-semibold text-light-primary text-base flex-1",children:r.title}),t.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[r.required&&t.jsx("span",{className:"text-sm font-semibold text-light-primary/80",children:"Always Active"}),t.jsx(A,{label:r.title,description:r.description,checked:h[r.id],onChange:d=>k(r.id,d),disabled:r.required,id:c,bordered:!1,className:"py-0",hideText:!0,size:"lg",labelClassName:"text-light-primary",descriptionClassName:"text-light-primary/80",noteClassName:"text-light-primary/80",trackClassName:"focus:ring-white"})]})]})}}),g.map((e,s)=>t.jsx("div",{id:`cookie-category-${s}-content`,style:{display:"none"},children:t.jsx("p",{className:"text-sm text-light-primary/80 leading-relaxed",children:e.description})},e.slug))]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 pt-4 shrink-0 items-center",children:[t.jsx(y,{variant:"borderWhite",onClick:j,className:"w-full sm:w-auto",animated:!1,type:"button",disabled:n,leftIcon:M({hoverOnly:!1,position:"left"}),children:"Accept Cookies"}),t.jsx(y,{variant:"link",onClick:N,className:"mx-auto text-light-primary",type:"button",disabled:n,children:"Decline Cookies"})]})]})})}const R=i.memo(P);export{R as default};
